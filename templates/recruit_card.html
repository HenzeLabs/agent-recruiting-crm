<div
  class="recruit-card {% if r.get('is_overdue') %}overdue{% endif %}"
  data-recruit-id="{{ r['id'] }}"
  data-stage="{{ r['stage'] }}"
>
  {% if r.get('is_overdue') %}
    <div class="overdue-badge">
      <span aria-hidden="true">!</span>
      Overdue
    </div>
  {% endif %}

  <form action="{{ url_for('update', id=r['id']) }}" method="POST">
    <div class="recruit-header">
      <div class="recruit-avatar">{{ r['name'][0]|upper }}</div>
      <div class="recruit-info">
        <h3>{{ r['name'] }}</h3>
        <p>{{ r['email'] or 'No email listed' }}</p>
        <p>{{ r['phone'] or 'No phone on file' }}</p>
      </div>
      <div class="recruit-stage">
        <label class="stage-label" for="stage-{{ r['id'] }}">Stage</label>
        <select
          name="stage"
          id="stage-{{ r['id'] }}"
          class="stage-select"
        >
          {% for s in stages %}
            <option value="{{ s }}" {% if s == r['stage'] %}selected{% endif %}>
              {{ s }}
            </option>
          {% endfor %}
        </select>
      </div>
    </div>

    <div class="recruit-notes">
      <label for="notes-{{ r['id'] }}">Notes</label>
      <textarea
        name="notes"
        id="notes-{{ r['id'] }}"
        placeholder="Capture momentum, commitments, or next steps..."
      >{{ r['notes'] or '' }}</textarea>
    </div>

    <div class="recruit-actions">
      <button type="submit" class="btn-save">Save</button>
      {% if r.get('is_overdue') or r['stage'] in ['New', 'Contacted'] %}
        <button
          type="button"
          class="btn-followup"
          onclick="quickFollowup({{ r['id'] }}, '{{ r['name'] }}', '{{ r['stage'] }}')"
        >
          Follow-up
        </button>
      {% endif %}
      <a
        href="{{ url_for('delete', id=r['id']) }}"
        class="btn-delete"
        onclick="return confirm('Delete this recruit?')"
      >
        Delete
      </a>
    </div>
  </form>
</div>
